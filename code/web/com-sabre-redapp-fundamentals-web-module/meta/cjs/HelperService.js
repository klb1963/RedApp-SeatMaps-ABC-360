"use strict";var __extends=this&&this.__extends||function(){var e=function(r,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var t in r)r.hasOwnProperty(t)&&(e[t]=r[t])})(r,t)};return function(r,t){function __(){this.constructor=r}e(r,t),r.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:!0});var AbstractService_1=require("sabre-ngv-app/app/services/impl/AbstractService"),Context_1=require("./Context"),ICommandMessageService_1=require("sabre-ngv-commsg/services/ICommandMessageService"),ISoapApiService_1=require("sabre-ngv-communication/interfaces/ISoapApiService"),RestApiService_1=require("sabre-ngv-communication/services/RestApiService"),IReservationService_1=require("sabre-ngv-reservation/services/IReservationService"),PnrPublicService_1=require("sabre-ngv-app/app/services/impl/PnrPublicService"),AgentProfileService_1=require("sabre-ngv-app/app/services/impl/AgentProfileService"),HelperService=function(e){function HelperService(){var r=null!==e&&e.apply(this,arguments)||this;return r.xmlPayloads={ElementName:"{XmlContent}",PersonName:"<PersonName><GivenName>{GivenName}</GivenName><Surname>{Surname}</Surname></PersonName>",ContactNumber:'<ContactNumber LocationCode="FSG" NameNumber="1.1" Phone="817-555-1212" PhoneUseType="H"/>',ContactNumbers:"<ContactNumbers>{ContactNumber}</ContactNumbers>",CustomerIdentifier:"<CustomerIdentifier>{CustomerIdentifier}</CustomerIdentifier>",CustomerInfo:"<CustomerInfo>{ContactNumbers}{CustomerIdentifier}{Email}{PersonName}</CustomerInfo>",Email:'<Email Address="WEBSERVICES.SUPPORT@SABRE.COM" LanguageOverride="O" NameNumber="1.1" ShortText="ABC123" Type="CC"/>',Address:'<Address><AddressLine>{AddressLine}</AddressLine><CityName>{CityName}</CityName><CountryCode>{CountryCode}</CountryCode><PostalCode>{PostalCode}</PostalCode><StateCountyProv StateCode="{StateCode}"/><StreetNmbr>{StreetNmbr}</StreetNmbr></Address>',AddressSabre:'        <Address>            <AddressLine>SABRE TRAVEL</AddressLine>            <CityName>SOUTHLAKE</CityName>            <CountryCode>US</CountryCode>            <PostalCode>76092</PostalCode>            <StateCountyProv StateCode="TX"/>            <StreetNmbr>3150 SABRE DRIVE</StreetNmbr>        </Address>',AgencyInfo:"<AgencyInfo>{Address}</AgencyInfo>",TravelItineraryAddInfoRQ:"<TravelItineraryAddInfoRQ>{AgencyInfo}{CustomerInfo}</TravelItineraryAddInfoRQ>",AddRemarkRQ:"<AddRemarkRQ><RemarkInfo>{Remark}</RemarkInfo></AddRemarkRQ>",Remark:'<Remark Type="General"><Text>{Text}</Text></Remark>',SpecialReqDetails:"<SpecialReqDetails>{AddRemarkRQ}</SpecialReqDetails>",PassengerDetailsRQ:'<PassengerDetailsRQ xmlns="http://services.sabre.com/sp/pd/v3_4" version="3.4.0" ignoreOnError="true" haltOnError="true">{MiscSegmentSellRQ}{SpecialReqDetails}{TravelItineraryAddInfoRQ}</PassengerDetailsRQ>',MiscSegmentSellRQ:'<MiscSegmentSellRQ><MiscSegment DepartureDateTime="12-21" InsertAfter="0" NumberInParty="1" Status="GK" Type="OTH"><OriginLocation LocationCode="FSG"/><Text>TEST</Text><VendorPrefs><Airline Code="XX"/></VendorPrefs></MiscSegment></MiscSegmentSellRQ>',SabreCommandLLSRQ:'<SabreCommandLLSRQ xmlns="http://webservices.sabre.com/sabreXML/2003/07" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" TimeStamp="2014-03-04T14:00:00" Version="1.8.1"><Request Output="SCREEN" CDATA="true"><HostCommand>{HostCommand}</HostCommand></Request></SabreCommandLLSRQ>'},r}return __extends(HelperService,e),HelperService.prototype.updateResRQ=function(){return JSON.stringify({UpdatePassengerNameRecordRQ:{TravelItineraryAddInfo:{CustomerInfo:{ContactNumbers:{ContactNumber:[{NameNumber:"1.1",Phone:"817-555-1212",PhoneUseType:"H"}]}}}}})},HelperService.prototype.createBookingRq=function(){return JSON.stringify({agency:{address:{name:"John Smith",street:"1230 Ellen Ave, apt 10",city:"Dallas",stateProvince:"TX",postalCode:"75063",countryCode:"US",freeText:"John Smith\n1230 Ellen Ave, apt 10\nDallas, TX 75063\nUS"},agencyCustomerNumber:"1234567"},travelers:[{givenName:"John",surname:"Kowalski",birthDate:"1970-01-23",passengerCode:"ADT"},{givenName:"Infant",surname:"Mrozicki",birthDate:"2020-01-23",passengerCode:"INF"},{givenName:"All",surname:"Mrozicki",birthDate:"2000-01-23",passengerCode:"ADT"}],contactInfo:{emails:["travel@sabre.com","travel2@sabre.com"],phones:["+123456"]},flightDetails:{flights:[{flightNumber:463,airlineCode:"EY",fromAirportCode:"MEL",toAirportCode:"AUH",departureDate:"2021-12-12",departureTime:"16:55",bookingClass:"Y",marriageGroup:!1,flightStatusCode:"NN"},{flightNumber:462,airlineCode:"EY",fromAirportCode:"AUH",toAirportCode:"MEL",departureDate:"2021-12-14",departureTime:"09:00",bookingClass:"Y",marriageGroup:!1,flightStatusCode:"NN"}]},payment:{billingAddress:{name:"John Smith",street:"1230 Ellen Ave, apt 10",city:"Dallas",stateProvince:"TX",postalCode:"75063",countryCode:"US"}}})},HelperService.prototype.createRestRQ=function(){return JSON.stringify([{GeoCodeRQ:{PlaceById:{Id:"DFW",BrowseCategory:{name:"AIR"}}}}])},HelperService.prototype.getXmlPayload=function(e,r){var t=null;if(this.xmlPayloads[e]){var n=this.xmlPayloads[e];t=n=n.replace(/(([\{])(.+?)(\}))/g,function(e,t,n,o,i,a,s){return _.isNull(r)?"":r[o]&&"string"==typeof r[o]?r[o]:"function"==typeof r[o]?r[o]():""})}return t},HelperService.prototype.sendCommandMessage=function(e,r,t){return Context_1.getService(ICommandMessageService_1.ICommandMessageService).send({rq:e,showRq:r,showRs:t})},HelperService.prototype.sendSWSRequest=function(e){return Context_1.getService(ISoapApiService_1.ISoapApiService).callSws(e)},HelperService.prototype.sendRestRequest=function(e){return Context_1.getService(RestApiService_1.RestApiService).send(e)},HelperService.prototype.sendExternalHttpRequest=function(e,r,t){return Context_1.getService(RestApiService_1.RestApiService).sendExternal(e,r,t)},HelperService.prototype.getReservation=function(){return Context_1.getService(IReservationService_1.IReservationService).getReservation()},HelperService.prototype.refreshTripSummary=function(){Context_1.getService(PnrPublicService_1.PnrPublicService).refreshData()},HelperService.prototype.getAgentProfileService=function(){return Context_1.getService(AgentProfileService_1.AgentProfileService)},HelperService.SERVICE_NAME="com-sabre-redapp-fundamentals-web-module-helperservice",HelperService}(AbstractService_1.AbstractService);exports.HelperService=HelperService;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkhlbHBlclNlcnZpY2UuanMiXSwibmFtZXMiOlsiX19leHRlbmRzIiwidGhpcyIsImUiLCJyIiwidCIsIk9iamVjdCIsInNldFByb3RvdHlwZU9mIiwiX19wcm90b19fIiwiQXJyYXkiLCJoYXNPd25Qcm9wZXJ0eSIsIl9fIiwiY29uc3RydWN0b3IiLCJwcm90b3R5cGUiLCJjcmVhdGUiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsIkFic3RyYWN0U2VydmljZV8xIiwicmVxdWlyZSIsIkNvbnRleHRfMSIsIklDb21tYW5kTWVzc2FnZVNlcnZpY2VfMSIsIklTb2FwQXBpU2VydmljZV8xIiwiUmVzdEFwaVNlcnZpY2VfMSIsIklSZXNlcnZhdGlvblNlcnZpY2VfMSIsIlBuclB1YmxpY1NlcnZpY2VfMSIsIkFnZW50UHJvZmlsZVNlcnZpY2VfMSIsIkhlbHBlclNlcnZpY2UiLCJhcHBseSIsImFyZ3VtZW50cyIsInhtbFBheWxvYWRzIiwiRWxlbWVudE5hbWUiLCJQZXJzb25OYW1lIiwiQ29udGFjdE51bWJlciIsIkNvbnRhY3ROdW1iZXJzIiwiQ3VzdG9tZXJJZGVudGlmaWVyIiwiQ3VzdG9tZXJJbmZvIiwiRW1haWwiLCJBZGRyZXNzIiwiQWRkcmVzc1NhYnJlIiwiQWdlbmN5SW5mbyIsIlRyYXZlbEl0aW5lcmFyeUFkZEluZm9SUSIsIkFkZFJlbWFya1JRIiwiUmVtYXJrIiwiU3BlY2lhbFJlcURldGFpbHMiLCJQYXNzZW5nZXJEZXRhaWxzUlEiLCJNaXNjU2VnbWVudFNlbGxSUSIsIlNhYnJlQ29tbWFuZExMU1JRIiwidXBkYXRlUmVzUlEiLCJKU09OIiwic3RyaW5naWZ5IiwiVXBkYXRlUGFzc2VuZ2VyTmFtZVJlY29yZFJRIiwiVHJhdmVsSXRpbmVyYXJ5QWRkSW5mbyIsIk5hbWVOdW1iZXIiLCJQaG9uZSIsIlBob25lVXNlVHlwZSIsImNyZWF0ZUJvb2tpbmdScSIsImFnZW5jeSIsImFkZHJlc3MiLCJuYW1lIiwic3RyZWV0IiwiY2l0eSIsInN0YXRlUHJvdmluY2UiLCJwb3N0YWxDb2RlIiwiY291bnRyeUNvZGUiLCJmcmVlVGV4dCIsImFnZW5jeUN1c3RvbWVyTnVtYmVyIiwidHJhdmVsZXJzIiwiZ2l2ZW5OYW1lIiwic3VybmFtZSIsImJpcnRoRGF0ZSIsInBhc3NlbmdlckNvZGUiLCJjb250YWN0SW5mbyIsImVtYWlscyIsInBob25lcyIsImZsaWdodERldGFpbHMiLCJmbGlnaHRzIiwiZmxpZ2h0TnVtYmVyIiwiYWlybGluZUNvZGUiLCJmcm9tQWlycG9ydENvZGUiLCJ0b0FpcnBvcnRDb2RlIiwiZGVwYXJ0dXJlRGF0ZSIsImRlcGFydHVyZVRpbWUiLCJib29raW5nQ2xhc3MiLCJtYXJyaWFnZUdyb3VwIiwiZmxpZ2h0U3RhdHVzQ29kZSIsInBheW1lbnQiLCJiaWxsaW5nQWRkcmVzcyIsImNyZWF0ZVJlc3RSUSIsIkdlb0NvZGVSUSIsIlBsYWNlQnlJZCIsIklkIiwiQnJvd3NlQ2F0ZWdvcnkiLCJnZXRYbWxQYXlsb2FkIiwibiIsInJlcGxhY2UiLCJvIiwiaSIsImEiLCJzIiwiXyIsImlzTnVsbCIsInNlbmRDb21tYW5kTWVzc2FnZSIsImdldFNlcnZpY2UiLCJJQ29tbWFuZE1lc3NhZ2VTZXJ2aWNlIiwic2VuZCIsInJxIiwic2hvd1JxIiwic2hvd1JzIiwic2VuZFNXU1JlcXVlc3QiLCJJU29hcEFwaVNlcnZpY2UiLCJjYWxsU3dzIiwic2VuZFJlc3RSZXF1ZXN0IiwiUmVzdEFwaVNlcnZpY2UiLCJzZW5kRXh0ZXJuYWxIdHRwUmVxdWVzdCIsInNlbmRFeHRlcm5hbCIsImdldFJlc2VydmF0aW9uIiwiSVJlc2VydmF0aW9uU2VydmljZSIsInJlZnJlc2hUcmlwU3VtbWFyeSIsIlBuclB1YmxpY1NlcnZpY2UiLCJyZWZyZXNoRGF0YSIsImdldEFnZW50UHJvZmlsZVNlcnZpY2UiLCJBZ2VudFByb2ZpbGVTZXJ2aWNlIiwiU0VSVklDRV9OQU1FIiwiQWJzdHJhY3RTZXJ2aWNlIl0sIm1hcHBpbmdzIjoiQUFBQSxhQUFh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QyxXQUFXLFFBQVFDLFlBQVksVUFBVXJDLGNBQWNkLFVBQVUyRSxhQUFhLFdBQVcsT0FBT3ZDLEtBQUtDLFVBQVUsQ0FBQyxDQUFDdUMsVUFBVSxDQUFDQyxVQUFVLENBQUNDLEdBQUcsTUFBTUMsZUFBZSxDQUFDakMsS0FBSyxhQUFhaEMsY0FBY2QsVUFBVWdGLGNBQWMsU0FBUzFGLEVBQUVDLEdBQUcsSUFBSUMsRUFBRSxLQUFLLEdBQUdILEtBQUs0QixZQUFZM0IsR0FBRyxDQUFDLElBQUkyRixFQUFFNUYsS0FBSzRCLFlBQVkzQixHQUFHRSxFQUFFeUYsRUFBRUEsRUFBRUMsUUFBUSxxQkFBcUIsU0FBUzVGLEVBQUVFLEVBQUV5RixFQUFFRSxFQUFFQyxFQUFFQyxFQUFFQyxHQUFHLE9BQU9DLEVBQUVDLE9BQU9qRyxHQUFHLEdBQUdBLEVBQUU0RixJQUFJLGlCQUFpQjVGLEVBQUU0RixHQUFHNUYsRUFBRTRGLEdBQUcsbUJBQW1CNUYsRUFBRTRGLEdBQUc1RixFQUFFNEYsS0FBSyxLQUFLLE9BQU8zRixHQUFHc0IsY0FBY2QsVUFBVXlGLG1CQUFtQixTQUFTbkcsRUFBRUMsRUFBRUMsR0FBRyxPQUFPZSxVQUFVbUYsV0FBV2xGLHlCQUF5Qm1GLHdCQUF3QkMsS0FBSyxDQUFDQyxHQUFHdkcsRUFBRXdHLE9BQU92RyxFQUFFd0csT0FBT3ZHLEtBQUtzQixjQUFjZCxVQUFVZ0csZUFBZSxTQUFTMUcsR0FBRyxPQUFPaUIsVUFBVW1GLFdBQVdqRixrQkFBa0J3RixpQkFBaUJDLFFBQVE1RyxJQUFJd0IsY0FBY2QsVUFBVW1HLGdCQUFnQixTQUFTN0csR0FBRyxPQUFPaUIsVUFBVW1GLFdBQVdoRixpQkFBaUIwRixnQkFBZ0JSLEtBQUt0RyxJQUFJd0IsY0FBY2QsVUFBVXFHLHdCQUF3QixTQUFTL0csRUFBRUMsRUFBRUMsR0FBRyxPQUFPZSxVQUFVbUYsV0FBV2hGLGlCQUFpQjBGLGdCQUFnQkUsYUFBYWhILEVBQUVDLEVBQUVDLElBQUlzQixjQUFjZCxVQUFVdUcsZUFBZSxXQUFXLE9BQU9oRyxVQUFVbUYsV0FBVy9FLHNCQUFzQjZGLHFCQUFxQkQsa0JBQWtCekYsY0FBY2QsVUFBVXlHLG1CQUFtQixXQUFXbEcsVUFBVW1GLFdBQVc5RSxtQkFBbUI4RixrQkFBa0JDLGVBQWU3RixjQUFjZCxVQUFVNEcsdUJBQXVCLFdBQVcsT0FBT3JHLFVBQVVtRixXQUFXN0Usc0JBQXNCZ0csc0JBQXNCL0YsY0FBY2dHLGFBQWEseURBQXlEaEcsY0FBeHlLLENBQXV6S1Qsa0JBQWtCMEcsaUJBQWlCNUcsUUFBUVcsY0FBY0EiLCJmaWxlIjoiSGVscGVyU2VydmljZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qIE5vIGNvbnRlbnQsIHNvcnJ5ISAqLyJdLCJzb3VyY2VSb290IjoiIn0= 