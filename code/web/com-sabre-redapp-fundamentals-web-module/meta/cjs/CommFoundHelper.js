"use strict";var __extends=this&&this.__extends||function(){var e=function(r,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var t in r)r.hasOwnProperty(t)&&(e[t]=r[t])})(r,t)};return function(r,t){function __(){this.constructor=r}e(r,t),r.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:!0});var AbstractService_1=require("sabre-ngv-app/app/services/impl/AbstractService"),Context_1=require("./Context"),ICommandMessageService_1=require("sabre-ngv-commsg/services/ICommandMessageService"),ISoapApiService_1=require("sabre-ngv-communication/interfaces/ISoapApiService"),RestApiService_1=require("sabre-ngv-communication/services/RestApiService"),IReservationService_1=require("sabre-ngv-reservation/services/IReservationService"),PnrPublicService_1=require("sabre-ngv-app/app/services/impl/PnrPublicService"),AgentProfileService_1=require("sabre-ngv-app/app/services/impl/AgentProfileService"),CommFoundHelper=function(e){function CommFoundHelper(){var r=null!==e&&e.apply(this,arguments)||this;return r.xmlPayloads={ElementName:"{XmlContent}",PersonName:"<PersonName><GivenName>{GivenName}</GivenName><Surname>{Surname}</Surname></PersonName>",ContactNumber:'<ContactNumber LocationCode="FSG" NameNumber="1.1" Phone="817-555-1212" PhoneUseType="H"/>',ContactNumbers:"<ContactNumbers>{ContactNumber}</ContactNumbers>",CustomerIdentifier:"<CustomerIdentifier>{CustomerIdentifier}</CustomerIdentifier>",CustomerInfo:"<CustomerInfo>{ContactNumbers}{CustomerIdentifier}{Email}{PersonName}</CustomerInfo>",Email:'<Email Address="WEBSERVICES.SUPPORT@SABRE.COM" LanguageOverride="O" NameNumber="1.1" ShortText="ABC123" Type="CC"/>',Address:'<Address><AddressLine>{AddressLine}</AddressLine><CityName>{CityName}</CityName><CountryCode>{CountryCode}</CountryCode><PostalCode>{PostalCode}</PostalCode><StateCountyProv StateCode="{StateCode}"/><StreetNmbr>{StreetNmbr}</StreetNmbr></Address>',AddressSabre:'        <Address>            <AddressLine>SABRE TRAVEL</AddressLine>            <CityName>SOUTHLAKE</CityName>            <CountryCode>US</CountryCode>            <PostalCode>76092</PostalCode>            <StateCountyProv StateCode="TX"/>            <StreetNmbr>3150 SABRE DRIVE</StreetNmbr>        </Address>',AgencyInfo:"<AgencyInfo>{Address}</AgencyInfo>",TravelItineraryAddInfoRQ:"<TravelItineraryAddInfoRQ>{AgencyInfo}{CustomerInfo}</TravelItineraryAddInfoRQ>",AddRemarkRQ:"<AddRemarkRQ><RemarkInfo>{Remark}</RemarkInfo></AddRemarkRQ>",Remark:'<Remark Type="General"><Text>{Text}</Text></Remark>',SpecialReqDetails:"<SpecialReqDetails>{AddRemarkRQ}</SpecialReqDetails>",PassengerDetailsRQ:'<PassengerDetailsRQ xmlns="http://services.sabre.com/sp/pd/v3_4" version="3.4.0" ignoreOnError="true" haltOnError="true">{MiscSegmentSellRQ}{SpecialReqDetails}{TravelItineraryAddInfoRQ}</PassengerDetailsRQ>',MiscSegmentSellRQ:'<MiscSegmentSellRQ><MiscSegment DepartureDateTime="12-21" InsertAfter="0" NumberInParty="1" Status="GK" Type="OTH"><OriginLocation LocationCode="FSG"/><Text>TEST</Text><VendorPrefs><Airline Code="XX"/></VendorPrefs></MiscSegment></MiscSegmentSellRQ>',FOP_Remark:'<FOP_Remark><CC_Info Suppress="false"><PaymentCard Code="VI" ExpireDate="2021-12" Number="4444333322221111" /></CC_Info></FOP_Remark>',SabreCommandLLSRQ:'<SabreCommandLLSRQ xmlns="http://webservices.sabre.com/sabreXML/2003/07" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" TimeStamp="2014-03-04T14:00:00" Version="1.8.1"><Request Output="SCREEN" CDATA="true"><HostCommand>{HostCommand}</HostCommand></Request></SabreCommandLLSRQ>'},r}return __extends(CommFoundHelper,e),CommFoundHelper.prototype.updateResRQ=function(){return JSON.stringify({UpdatePassengerNameRecordRQ:{TravelItineraryAddInfo:{CustomerInfo:{ContactNumbers:{ContactNumber:[{NameNumber:"1.1",Phone:"817-555-1212",PhoneUseType:"H"}]}}}}})},CommFoundHelper.prototype.createBookingRq=function(){return JSON.stringify({agency:{address:{name:"John Smith",street:"1230 Ellen Ave, apt 10",city:"Dallas",stateProvince:"TX",postalCode:"75063",countryCode:"US",freeText:"John Smith\n1230 Ellen Ave, apt 10\nDallas, TX 75063\nUS"},agencyCustomerNumber:"1234567"},travelers:[{givenName:"John",surname:"Kowalski",birthDate:"1970-01-23",passengerCode:"ADT"},{givenName:"Infant",surname:"Mrozicki",birthDate:"2020-01-23",passengerCode:"INF"},{givenName:"All",surname:"Mrozicki",birthDate:"2000-01-23",passengerCode:"ADT"}],contactInfo:{emails:["travel@sabre.com","travel2@sabre.com"],phones:["+123456"]},flightDetails:{flights:[{flightNumber:463,airlineCode:"EY",fromAirportCode:"MEL",toAirportCode:"AUH",departureDate:"2021-12-12",departureTime:"16:55",bookingClass:"Y",marriageGroup:!1,flightStatusCode:"NN"},{flightNumber:462,airlineCode:"EY",fromAirportCode:"AUH",toAirportCode:"MEL",departureDate:"2021-12-14",departureTime:"09:00",bookingClass:"Y",marriageGroup:!1,flightStatusCode:"NN"}]},payment:{billingAddress:{name:"John Smith",street:"1230 Ellen Ave, apt 10",city:"Dallas",stateProvince:"TX",postalCode:"75063",countryCode:"US"}}})},CommFoundHelper.prototype.createRestRQ=function(){return JSON.stringify([{GeoCodeRQ:{PlaceById:{Id:"DFW",BrowseCategory:{name:"AIR"}}}}])},CommFoundHelper.prototype.getXmlPayload=function(e,r){var t=null;if(this.xmlPayloads[e]){var o=this.xmlPayloads[e];t=o=o.replace(/(([\{])(.+?)(\}))/g,function(e,t,o,n,a,i,s){return _.isNull(r)?"":r[n]&&"string"==typeof r[n]?r[n]:"function"==typeof r[n]?r[n]():""})}return t},CommFoundHelper.prototype.sendCommandMessage=function(e,r,t){return Context_1.getService(ICommandMessageService_1.ICommandMessageService).send({rq:e,showRq:r,showRs:t})},CommFoundHelper.prototype.sendSWSRequest=function(e){return Context_1.getService(ISoapApiService_1.ISoapApiService).callSws(e)},CommFoundHelper.prototype.sendRestRequest=function(e){return Context_1.getService(RestApiService_1.RestApiService).send(e)},CommFoundHelper.prototype.sendExternalHttpRequest=function(e,r,t){return Context_1.getService(RestApiService_1.RestApiService).sendExternal(e,r,t)},CommFoundHelper.prototype.getReservation=function(){return Context_1.getService(IReservationService_1.IReservationService).getReservation()},CommFoundHelper.prototype.refreshTipSummary=function(){Context_1.getService(PnrPublicService_1.PnrPublicService).refreshData()},CommFoundHelper.prototype.getAgentProfileService=function(){return Context_1.getService(AgentProfileService_1.AgentProfileService)},CommFoundHelper.SERVICE_NAME="com-sabre-redapp-fundamentals-web-module-service-commfound",CommFoundHelper}(AbstractService_1.AbstractService);exports.CommFoundHelper=CommFoundHelper;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkNvbW1Gb3VuZEhlbHBlci5qcyJdLCJuYW1lcyI6WyJfX2V4dGVuZHMiLCJ0aGlzIiwiZSIsInIiLCJ0IiwiT2JqZWN0Iiwic2V0UHJvdG90eXBlT2YiLCJfX3Byb3RvX18iLCJBcnJheSIsImhhc093blByb3BlcnR5IiwiX18iLCJjb25zdHJ1Y3RvciIsInByb3RvdHlwZSIsImNyZWF0ZSIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiQWJzdHJhY3RTZXJ2aWNlXzEiLCJyZXF1aXJlIiwiQ29udGV4dF8xIiwiSUNvbW1hbmRNZXNzYWdlU2VydmljZV8xIiwiSVNvYXBBcGlTZXJ2aWNlXzEiLCJSZXN0QXBpU2VydmljZV8xIiwiSVJlc2VydmF0aW9uU2VydmljZV8xIiwiUG5yUHVibGljU2VydmljZV8xIiwiQWdlbnRQcm9maWxlU2VydmljZV8xIiwiQ29tbUZvdW5kSGVscGVyIiwiYXBwbHkiLCJhcmd1bWVudHMiLCJ4bWxQYXlsb2FkcyIsIkVsZW1lbnROYW1lIiwiUGVyc29uTmFtZSIsIkNvbnRhY3ROdW1iZXIiLCJDb250YWN0TnVtYmVycyIsIkN1c3RvbWVySWRlbnRpZmllciIsIkN1c3RvbWVySW5mbyIsIkVtYWlsIiwiQWRkcmVzcyIsIkFkZHJlc3NTYWJyZSIsIkFnZW5jeUluZm8iLCJUcmF2ZWxJdGluZXJhcnlBZGRJbmZvUlEiLCJBZGRSZW1hcmtSUSIsIlJlbWFyayIsIlNwZWNpYWxSZXFEZXRhaWxzIiwiUGFzc2VuZ2VyRGV0YWlsc1JRIiwiTWlzY1NlZ21lbnRTZWxsUlEiLCJGT1BfUmVtYXJrIiwiU2FicmVDb21tYW5kTExTUlEiLCJ1cGRhdGVSZXNSUSIsIkpTT04iLCJzdHJpbmdpZnkiLCJVcGRhdGVQYXNzZW5nZXJOYW1lUmVjb3JkUlEiLCJUcmF2ZWxJdGluZXJhcnlBZGRJbmZvIiwiTmFtZU51bWJlciIsIlBob25lIiwiUGhvbmVVc2VUeXBlIiwiY3JlYXRlQm9va2luZ1JxIiwiYWdlbmN5IiwiYWRkcmVzcyIsIm5hbWUiLCJzdHJlZXQiLCJjaXR5Iiwic3RhdGVQcm92aW5jZSIsInBvc3RhbENvZGUiLCJjb3VudHJ5Q29kZSIsImZyZWVUZXh0IiwiYWdlbmN5Q3VzdG9tZXJOdW1iZXIiLCJ0cmF2ZWxlcnMiLCJnaXZlbk5hbWUiLCJzdXJuYW1lIiwiYmlydGhEYXRlIiwicGFzc2VuZ2VyQ29kZSIsImNvbnRhY3RJbmZvIiwiZW1haWxzIiwicGhvbmVzIiwiZmxpZ2h0RGV0YWlscyIsImZsaWdodHMiLCJmbGlnaHROdW1iZXIiLCJhaXJsaW5lQ29kZSIsImZyb21BaXJwb3J0Q29kZSIsInRvQWlycG9ydENvZGUiLCJkZXBhcnR1cmVEYXRlIiwiZGVwYXJ0dXJlVGltZSIsImJvb2tpbmdDbGFzcyIsIm1hcnJpYWdlR3JvdXAiLCJmbGlnaHRTdGF0dXNDb2RlIiwicGF5bWVudCIsImJpbGxpbmdBZGRyZXNzIiwiY3JlYXRlUmVzdFJRIiwiR2VvQ29kZVJRIiwiUGxhY2VCeUlkIiwiSWQiLCJCcm93c2VDYXRlZ29yeSIsImdldFhtbFBheWxvYWQiLCJvIiwicmVwbGFjZSIsIm4iLCJhIiwiaSIsInMiLCJfIiwiaXNOdWxsIiwic2VuZENvbW1hbmRNZXNzYWdlIiwiZ2V0U2VydmljZSIsIklDb21tYW5kTWVzc2FnZVNlcnZpY2UiLCJzZW5kIiwicnEiLCJzaG93UnEiLCJzaG93UnMiLCJzZW5kU1dTUmVxdWVzdCIsIklTb2FwQXBpU2VydmljZSIsImNhbGxTd3MiLCJzZW5kUmVzdFJlcXVlc3QiLCJSZXN0QXBpU2VydmljZSIsInNlbmRFeHRlcm5hbEh0dHBSZXF1ZXN0Iiwic2VuZEV4dGVybmFsIiwiZ2V0UmVzZXJ2YXRpb24iLCJJUmVzZXJ2YXRpb25TZXJ2aWNlIiwicmVmcmVzaFRpcFN1bW1hcnkiLCJQbnJQdWJsaWNTZXJ2aWNlIiwicmVmcmVzaERhdGEiLCJnZXRBZ2VudFByb2ZpbGVTZXJ2aWNlIiwiQWdlbnRQcm9maWxlU2VydmljZSIsIlNFUlZJQ0VfTkFNRSIsIkFic3RyYWN0U2VydmljZSJdLCJtYXBw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QWFDLE9BQU8seUJBQXlCQyxLQUFLLFNBQVNDLGNBQWMsS0FBS0MsV0FBVyxRQUFRQyxZQUFZLFVBQVV0QyxnQkFBZ0JkLFVBQVU0RSxhQUFhLFdBQVcsT0FBT3ZDLEtBQUtDLFVBQVUsQ0FBQyxDQUFDdUMsVUFBVSxDQUFDQyxVQUFVLENBQUNDLEdBQUcsTUFBTUMsZUFBZSxDQUFDakMsS0FBSyxhQUFhakMsZ0JBQWdCZCxVQUFVaUYsY0FBYyxTQUFTM0YsRUFBRUMsR0FBRyxJQUFJQyxFQUFFLEtBQUssR0FBR0gsS0FBSzRCLFlBQVkzQixHQUFHLENBQUMsSUFBSTRGLEVBQUU3RixLQUFLNEIsWUFBWTNCLEdBQUdFLEVBQUUwRixFQUFFQSxFQUFFQyxRQUFRLHFCQUFxQixTQUFTN0YsRUFBRUUsRUFBRTBGLEVBQUVFLEVBQUVDLEVBQUVDLEVBQUVDLEdBQUcsT0FBT0MsRUFBRUMsT0FBT2xHLEdBQUcsR0FBR0EsRUFBRTZGLElBQUksaUJBQWlCN0YsRUFBRTZGLEdBQUc3RixFQUFFNkYsR0FBRyxtQkFBbUI3RixFQUFFNkYsR0FBRzdGLEVBQUU2RixLQUFLLEtBQUssT0FBTzVGLEdBQUdzQixnQkFBZ0JkLFVBQVUwRixtQkFBbUIsU0FBU3BHLEVBQUVDLEVBQUVDLEdBQUcsT0FBT2UsVUFBVW9GLFdBQVduRix5QkFBeUJvRix3QkFBd0JDLEtBQUssQ0FBQ0MsR0FBR3hHLEVBQUV5RyxPQUFPeEcsRUFBRXlHLE9BQU94RyxLQUFLc0IsZ0JBQWdCZCxVQUFVaUcsZUFBZSxTQUFTM0csR0FBRyxPQUFPaUIsVUFBVW9GLFdBQVdsRixrQkFBa0J5RixpQkFBaUJDLFFBQVE3RyxJQUFJd0IsZ0JBQWdCZCxVQUFVb0csZ0JBQWdCLFNBQVM5RyxHQUFHLE9BQU9pQixVQUFVb0YsV0FBV2pGLGlCQUFpQjJGLGdCQUFnQlIsS0FBS3ZHLElBQUl3QixnQkFBZ0JkLFVBQVVzRyx3QkFBd0IsU0FBU2hILEVBQUVDLEVBQUVDLEdBQUcsT0FBT2UsVUFBVW9GLFdBQVdqRixpQkFBaUIyRixnQkFBZ0JFLGFBQWFqSCxFQUFFQyxFQUFFQyxJQUFJc0IsZ0JBQWdCZCxVQUFVd0csZUFBZSxXQUFXLE9BQU9qRyxVQUFVb0YsV0FBV2hGLHNCQUFzQjhGLHFCQUFxQkQsa0JBQWtCMUYsZ0JBQWdCZCxVQUFVMEcsa0JBQWtCLFdBQVduRyxVQUFVb0YsV0FBVy9FLG1CQUFtQitGLGtCQUFrQkMsZUFBZTlGLGdCQUFnQmQsVUFBVTZHLHVCQUF1QixXQUFXLE9BQU90RyxVQUFVb0YsV0FBVzlFLHNCQUFzQmlHLHNCQUFzQmhHLGdCQUFnQmlHLGFBQWEsNkRBQTZEakcsZ0JBQTE5SyxDQUEyK0tULGtCQUFrQjJHLGlCQUFpQjdHLFFBQVFXLGdCQUFnQkEiLCJmaWxlIjoiQ29tbUZvdW5kSGVscGVyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyogTm8gY29udGVudCwgc29ycnkhICovIl0sInNvdXJjZVJvb3QiOiIifQ== 